System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var u,e,i,t,r,a,n,c;return{setters:[function(o){u=o.createClass},function(o){e=o.cclegacy,i=o._decorator,t=o.AudioClip,r=o.resources,a=o.Node,n=o.director,c=o.AudioSource}],execute:function(){var s,d;e._RF.push({},"298c6TbJR5PJKHnuY6chjiA","audioManager",void 0);var _=i.ccclass;i.property,o("default",_("AudioMgr")(((d=function(){function o(){this._audioSource=void 0,this._volume=.8,this._sound_on=!0,this._audioSource2=void 0,console.log("初始化声音管理模块");var o=new a;o.name="__audio_node__",n.getScene().addChild(o),n.addPersistRootNode(o),this._audioSource=o.addComponent(c),this._audioSource.playOnAwake=!1;var u=new a;u.name="__audio_node2__",n.getScene().addChild(u),n.addPersistRootNode(u),this._audioSource2=u.addComponent(c),this._audioSource2.playOnAwake=!1}var e=o.prototype;return e.playBgm=function(o,u){var e=this;void 0===u&&(u=1),this._sound_on?this._volume=u:this._volume=0;var i=o;i?i instanceof t?(this._audioSource.stop(),this._audioSource.clip=i,this._audioSource.play(),this._audioSource.loop=!0,this._audioSource.volume=this._volume):r.load(i,(function(o,u){o?console.error("背景音乐加载失败",i):(e._audioSource.stop(),e._audioSource.clip=u,e._audioSource.play(),e._audioSource.loop=!0,e._audioSource.volume=e._volume)})):console.error("背景音乐为空")},e.playEffect=function(o,u){var e=this;if(this._sound_on){var i=o;i?i instanceof t?this._audioSource.playOneShot(i,this._volume):r.load(i,(function(o,u){o?console.error("音效加载失败",i):e._audioSource.playOneShot(u,e._volume)})):console.error("音效为空")}},e.playEffectCanBreak=function(o,u){var e=this;void 0===u&&(u=1),this._sound_on?this._volume=u:this._volume=0;var i=o;i?i instanceof t?(this._audioSource2.stop(),this._audioSource2.clip=i,this._audioSource2.play(),this._audioSource2.loop=!1,this._audioSource2.volume=this._volume):r.load(i,(function(o,u){o?console.error("音效加载失败",i):(e._audioSource2.stop(),e._audioSource2.clip=u,e._audioSource2.play(),e._audioSource2.loop=!1,e._audioSource2.volume=e._volume)})):console.error("音效为空")},e.setMenu=function(o){this._sound_on=o,this._sound_on?(this._audioSource.volume=1,this._audioSource2.volume=1,this._volume=1):(this._audioSource.volume=0,this._audioSource2.volume=0,this._volume=0)},e.stopBgm=function(){this._audioSource.stop()},e.pauseBgm=function(){this._audioSource.pause()},e.resumeBgm=function(){this._audioSource.play()},u(o,[{key:"AudioSource",get:function(){return this._audioSource}},{key:"AudioSource2",get:function(){return this._audioSource2}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,s=d))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameLanch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./gameLoadingNode.ts"],(function(n){var t,e,o,a,c,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,a=n.Component},function(n){c=n.default},function(n){r=n.gameLoadingNode}],execute:function(){var s,u;e._RF.push({},"36d96yWFq9BZJFMWcjEUVTU","gameLanch",void 0);var i=o.ccclass;o.property,n("gameLauch",i("gameLauch")(((u=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))||this).loadingSprite=null,t.loadingLabel=null,t}t(e,n);var o=e.prototype;return o.onLoad=function(){null===e.Instance?(console.log("初始化gameLauch单列!"),e.Instance=this,this.node.addComponent(c)):this.destroy()},o.start=function(){r.Instance.startLoad()},e}(a)).Instance=null,s=u))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameLoadingNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tools.ts","./resMgr.ts"],(function(n){var t,e,a,o,i,l,s,r,d,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n._decorator,o=n.Sprite,i=n.Label,l=n.tween,s=n.instantiate,r=n.Component},function(n){d=n.default},function(n){c=n.default}],execute:function(){var g,u;e._RF.push({},"6bb24f+IGxKdrzCr5WiL8Ey","gameLoadingNode",void 0);var f=a.ccclass;a.property,n("gameLoadingNode",f("gameLoadingNode")(((u=function(n){function e(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this).loadingSprite=null,t.loadingLabel=null,t}t(e,n);var a=e.prototype;return a.onLoad=function(){null===e.Instance?(e.Instance=this,console.log("初始化 gameLoadingNode 单列!")):this.destroy()},a.start=function(){},a.startLoad=function(){var n=this;this.loadingSprite=this.node.getChildByName("loading1").getComponent(o),this.loadingLabel=this.node.getChildByName("loadingStr").getComponent(i),this.loadingSprite.fillRange=0,this.loadingLabel.string="资源加载:开始加载",c.Instance.preLoadResPkg(d.resPkg,this.loadingResCallBack,(function(){l(n.node).delay(.3).call((function(){e.Instance.enterStartScene()})).start()}))},a.loadingResCallBack=function(n,t){e.Instance.loadingLabel.string="资源加载:"+n+"/"+t,e.Instance.loadingSprite.fillRange=n/t},a.enterStartScene=function(){this.hideLoadingNode();var n=c.Instance.getAsset("prefabs","gameStart");s(n).parent=this.node.parent},a.hideLoadingNode=function(){this.node.active=!1},e}(r)).Instance=null,g=u))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./tools.ts","./index.mjs_cjs=&original=.js","./index.js"],(function(e){var t,n,a,i,r,o,l,s,u,c,d,g,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Label,s=e.Node,u=e.instantiate,c=e.Component},function(e){d=e.default},function(e){g=e.default,f=e.SOUND},null,function(e){h=e.default}],execute:function(){var b,m,p,v,y,L,N,_,k,B,C,S;r._RF.push({},"88827lxtv5D9ZqgDdOG+R/q","gameStart",void 0);var D=o.ccclass,w=o.property;e("gameStart",(b=D("gameStart"),m=w(l),p=w(l),v=w(s),y=w(s),b(((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"rankLabel",_,i(t)),a(t,"btnLabel",k,i(t)),t.gamePrefab=void 0,t.gameNode=null,a(t,"main_node",B,i(t)),a(t,"rule_node",C,i(t)),t.openRankNode=!1,t}n(t,e);var r=t.prototype;return r.onLoad=function(){null===t.Instance?(t.Instance=this,console.log("初始化gameStart单列!"),h.ready()):this.destroy()},r.start=function(){g.playSound(f.back_sound),this.gamePrefab=d.Instance.getAsset("prefabs","gameNode");var e=g.getLevel();this.setLevelLabel(e)},r.setLevelLabel=function(e){this.rankLabel.string="最高纪录:"+e,this.btnLabel.string="第"+e+"关",g.saveLevel()},r.onBtnClick=function(e,t){if("restGame"==t&&(g.level=1,g.saveLevel()),"startGame"==t)this.gameNode=u(this.gamePrefab),this.gameNode.parent=this.node.parent,this.gameNode.active=!0,this.hide();else if("rankBtn"==t){var n=h.initDataUnsafe.user.username;return void(this.node.getChildByName("rankBtn").getChildByName("Label").getComponent(l).string=n)}},r.hide=function(){this.node.active=!1},r.show=function(){this.node.active=!0,this.openRankNode=!1,this.main_node.active=!0,this.rule_node.active=!1,this.node.getChildByName("rankBtn").getChildByName("Label").getComponent(l).string="显示排行榜"},t}(c)).Instance=null,_=t((N=S).prototype,"rankLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"btnLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"main_node",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(N.prototype,"rule_node",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=N))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./OpenContext.ts","./audioManager.ts","./gameLanch.ts","./gameLoadingNode.ts","./gameStart.ts","./mjNode.ts","./mjcard.ts","./resMgr.ts","./tools.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mjcard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tools.ts"],(function(t){var e,i,n,s,r,a,o,c,l,d,h,u,p,m,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,o=t._decorator,c=t.Sprite,l=t.SpriteAtlas,d=t.Vec3,h=t.Node,u=t.color,p=t.tween,m=t.Component,f=t.Color},function(t){g=t.default}],execute:function(){var F,v,C,S,k,w,b;a._RF.push({},"fc62erwdOpHvLUJ46SH/0d5","mjcard",void 0);var I=o.ccclass,j=o.property;t("mjcard",(F=I("mjcard"),v=j(c),C=j(l),F((w=e((k=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"sprite",w,s(e)),n(e,"mjAtlas",b,s(e)),e._interaction=!0,e.cardId=0,e.scale=1.5,e.moveDuration=.1,e.scaleDuration=.1,e.sprFrame=null,e.cardBackFrame=null,e.sPos=new d(0,0,0),e.ePos=new d(0,0,0),e.isCanClick=!1,e.oldSiblingIndex=0,e}i(e,t);var a=e.prototype;return a.start=function(){this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this)},a.initMj=function(t,e,i,n){(this.node.name="mj_"+t,this.cardId=e,this.sprFrame=this.mjAtlas.getSpriteFrame("mj_"+t),g.cardBackNow<g.cardBackTotal)?1==g.getRandomInt(1,3)?(g.cardBackNow++,this.cardBackFrame=this.mjAtlas.getSpriteFrame("mj_35"),this.sprite.spriteFrame=this.cardBackFrame):this.sprite.spriteFrame=this.sprFrame:this.sprite.spriteFrame=this.sprFrame;this.interaction=!1,this.playAnimation(i,n)},a.restCard=function(){null!=this.cardBackFrame&&(this.sprite.spriteFrame=this.sprFrame)},a.restSibingIndex=function(){this.node.setSiblingIndex(this.oldSiblingIndex)},a.setInsterEndPos=function(t){this.ePos=t},a.setCanClick=function(t){this.isCanClick=t},a.setTouShi=function(){if(null!=this.cardBackFrame){var t=new h("toushi").addComponent(c);t.spriteFrame=this.sprFrame,t.color=u(255,255,255,50),this.node.addChild(t.node)}},a.playAnimation=function(t,e){var i=this,n=g.getRandomInt(-300,300),s=g.getRandomInt(-200,400);this.node.setPosition(0,0),this.node.setScale(0,0),this.node.active=!0,this.sPos=new d(n,s,0);var r=this;if(1!=t){if(2==t){this.node.setPosition(n,s);var a=p(this.node).to(this.scaleDuration,{scale:new d(this.scale,this.scale,1)}),o=p(this.node).call((function(){r.isCanClick=!0,r.oldSiblingIndex=i.node.getSiblingIndex(),e&&e()}));p(this.node).sequence(a,o).start()}}else{var c=p(this.node).to(this.moveDuration,{position:new d(n,s,0)}),l=p(this.node).to(this.moveDuration,{scale:new d(this.scale,this.scale,1)}),h=p(this.node).parallel(c,l),u=p(this.node).call((function(){r.isCanClick=!0,r.oldSiblingIndex=i.node.getSiblingIndex(),e&&e()}));p(this.node).sequence(h,u).start()}},a.onTouchStart=function(t){0==this._interaction||0==this.isCanClick?console.log("不可点击的麻将 = ",t.target.name):(console.log("点击麻将 = ",t.target.name),this.node.parent.emit("clickmj",t.target))},a.update=function(t){},r(e,[{key:"interaction",get:function(){return this._interaction},set:function(t){this._interaction=t;var e=new f;e.fromHEX("#FFFFFF");var i=new f;i.fromHEX("#AC8D8D"),this.sprite.color=t?e:i}}]),e}(m)).prototype,"sprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(k.prototype,"mjAtlas",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=k))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/mjNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tools.ts","./gameStart.ts","./audioManager.ts"],(function(t){var e,i,s,a,n,o,l,h,m,d,u,r,c,p,g,_,b,f,C,v,B,I,y,k,S,T,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.Prefab,h=t.ProgressBar,m=t.Label,d=t.Node,u=t.game,r=t.Game,c=t.Vec3,p=t.tween,g=t.instantiate,_=t.Rect,b=t.Intersection2D,f=t.Sprite,C=t.color,v=t.Button,B=t.Component},function(t){I=t.GAMESTATE,y=t.default,k=t.GAMETIPS,S=t.SOUND},function(t){T=t.gameStart},function(t){N=t.default}],execute:function(){var x,P,w,j,M,D,L,A,H,X,R,E,G;n._RF.push({},"5e1aas6J3hBqpb9rkSPiEl7","mjNode",void 0);var z=o.ccclass,q=o.property;t("mjNode",(x=z("mjNode"),P=q(l),w=q(h),j=q(m),M=q(d),D=q({type:[d]}),x((H=e((A=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,s(e,"mycard_prefab",H,a(e)),s(e,"timeProgressBar",X,a(e)),s(e,"timeLabel",R,a(e)),s(e,"gameTipsNode",E,a(e)),s(e,"tabNodes",G,a(e)),e.tips_title_label=null,e.tips_xipai_label=null,e.tips_chehui_label=null,e.tips_addtime_label=null,e.tips_toushi_label=null,e.tips_music_label=null,e.tips_sound_label=null,e.tips_music_node=null,e.tips_sound_node=null,e.tips_author_node=null,e.gameContinueBtn=null,e.gameRestBtn=null,e.gameNextBtn=null,e.isCanClick=!1,e.desktopItems=[],e.desktopCuritem=0,e.randomIndex=0,e.desktopItemCount=0,e.time=60,e.allTime=e.time,e.gameState=I.game_start,e.tabItemPos=[],e.tabItem=[],e}i(e,t);var n=e.prototype;return n.onLoad=function(){console.log("初始化游戏类");var t=this.gameTipsNode.getChildByName("frame");this.tips_title_label=t.getChildByName("tips_title_label").getComponent(m),this.tips_xipai_label=t.getChildByName("tips_xipai_label").getComponent(m),this.tips_chehui_label=t.getChildByName("tips_chehui_label").getComponent(m),this.tips_addtime_label=t.getChildByName("tips_addtime_label").getComponent(m),this.tips_toushi_label=t.getChildByName("tips_toushi_label").getComponent(m),this.tips_music_node=t.getChildByName("music_label"),this.tips_music_label=this.tips_music_node.getChildByName("Button").getChildByName("Label").getComponent(m),this.tips_sound_node=t.getChildByName("sound_label"),this.tips_sound_label=this.tips_sound_node.getChildByName("Button").getChildByName("Label").getComponent(m),this.tips_author_node=t.getChildByName("author_label"),this.gameContinueBtn=t.getChildByName("gameContinueBtn"),this.gameNextBtn=t.getChildByName("gameNextBtn"),this.gameRestBtn=t.getChildByName("gameRestBtn"),this.node.on("clickmj",this.onClickMj,this),y.getData(),this.updataBtn();var e=this;u.on(r.EVENT_HIDE,(function(){e.gameShowTips(k.game_seting),console.log("游戏进入后台")})),u.on(r.EVENT_SHOW,(function(){console.log("游戏进入前台")}))},n.start=function(){for(var t=0;t<this.tabNodes.length;t++){var e={x:0,y:0},i=this.tabNodes[t].getPosition();e.x=i.x,e.y=i.y,this.tabItemPos.push(e)}this.startGame()},n.startGame=function(){console.log("游戏开始---",y.level),this.isCanClick=!0,this.gameState=I.game_start,this.cleanMj(),1==y.level?this.desktopItemCount=24:2==y.level?this.desktopItemCount=45:this.desktopItemCount=45+3*y.level,y.cardBackNow=0,y.cardBackTotal=y.level+2,this.setLevelTime(this.desktopItemCount+10),this.gameTipsNode.active=!1,T.Instance.hide(),this.updataBtn(),y.randomMjAnim(),this.initDesktopMj()},n.setLevelTime=function(t){this.allTime=t,this.time=this.allTime,this.timeLabel.string="第"+y.level+"关 倒计时:"+this.time+"s",this.timeProgressBar.progress=this.time/this.allTime},n.cleanMj=function(){this.node.destroyAllChildren(),this.desktopItems=[],this.tabItem=[]},n.onBtnClick=function(t,e){if("gameMusic"==e)y.gameMusic?(N.Instance.pauseBgm(),y.gameMusic=!1,this.tips_music_label.string="关"):(N.Instance.resumeBgm(),y.gameMusic=!0,this.tips_music_label.string="开");else if("gameSound"==e)y.gameSound?(N.Instance.setMenu(!1),y.gameSound=!1,this.tips_sound_label.string="关"):(N.Instance.setMenu(!0),y.gameSound=!0,this.tips_sound_label.string="开");else if("gameSetingBtn"==e){if(y.playSound(S.click_sound),this.gameState==I.game_start)return;this.gameShowTips(k.game_seting)}else if("gameContinue"==e)y.playSound(S.click_sound),this.contiuneGame();else if("gameRest"==e)y.playSound(S.click_sound),this.startGame();else if("gameNext"==e)y.playSound(S.click_sound),this.startGame();else if("gameBack"==e)y.playSound(S.click_sound),T.Instance.setLevelLabel(y.level),T.Instance.show(),this.unscheduleAllCallbacks(),this.node.parent.destroy();else if("xipai"==e)y.xiPai>0&&(this.xiPai(),this.updataBtn());else if("chehui"==e)y.cheHui>0&&(this.cheHui(),this.updataBtn());else if("addtime"==e)y.addTime>0&&(this.addTime(),this.updataBtn());else if("toushi"==e)y.touShi>0&&(this.touShi(),this.setBtnState("gameToushiBtn",!1,"透视X"+y.touShi));else if("music"==e){if(y.music)y.music=!1,N.Instance.pauseBgm(),this.node.parent.getChildByName("gameMusicBtn").getChildByName("Label").getComponent(m).string="音乐❌";else y.music=!0,N.Instance.resumeBgm(),this.node.parent.getChildByName("gameMusicBtn").getChildByName("Label").getComponent(m).string="音乐✔"}},n.xiPai=function(){var t=this;y.xiPai--,this.unschedule(this.countdown);for(var e=this,i=0;i<this.desktopItems.length;i++)this.desktopItems[i].active=!1;for(var s=function(i){var s=t.desktopItems[i].getComponent("mjcard");p(t.node).delay(.04*i).call((function(){y.playSound(S.sendCard_sound),i==t.desktopItems.length-1?s.playAnimation(y.animType,(function(){e.refreshDeaktopMj(),console.log("发牌完毕---",e.desktopCuritem),e.schedule(e.countdown,1)})):s.playAnimation(y.animType,null)})).start()},a=0;a<this.desktopItems.length;a++)s(a)},n.cheHui=function(){if(!(this.tabItem.length<=0)){y.playSound(S.click_sound);var t=this.tabItem.length,e=this.tabItem[t-1],i=e.getComponent("mjcard");i.setInsterEndPos(new c(0,0,0)),i.setCanClick(!0);var s=this,a=p(e).to(.2,{position:new c(i.sPos.x,i.sPos.y,0)}),n=p(e).call((function(){i.restSibingIndex(),s.desktopItems.push(e),s.refreshDeaktopMj()}));p(e).sequence(a,n).start(),this.tabItem.pop(),y.cheHui--}},n.addTime=function(){y.addTime<=0||(this.time=this.time+y.addTime,this.allTime=this.time,this.timeLabel.string="第"+y.level+"关 倒计时:"+this.time+"s",this.timeProgressBar.progress=this.time/this.allTime,y.addTime=0,y.playSound(S.start_sound))},n.touShi=function(){if(!(y.touShi<=0)){y.touShi--,y.playSound(S.click_sound);for(var t=0;t<this.desktopItems.length;t++){this.desktopItems[t].getComponent("mjcard").setTouShi()}}},n.onClickMj=function(t){if(0!=this.isCanClick)if(this.isCanClick=!1,this.tabItem.length>=7)console.log("格子已经满了---游戏结束");else{y.playSound(S.click_sound),this.insertItem(t,(function(){e.deleteDesktopItems(t);var i=e.isTabCanDelete(t);if(i.length<3)return e.refreshDeaktopMj(),e.updataBtn(),7==e.tabItem.length&&(e.gameShowTips(k.gmae_fail),console.log("游戏结束---")),void(e.isCanClick=!0);e.deleteTabAnima(i,(function(){y.playSound(S.clear_sound),e.tabItem.splice(i[2],1),e.tabItem.splice(i[1],1),e.tabItem.splice(i[0],1),e.refreshDeaktopMj(),e.time+=2,e.restTopAnima()}))}));var e=this}else console.log("动画为执行完毕，不可点击---")},n.update=function(t){},n.initDesktopMj=function(){var t=this;this.desktopCuritem=0,this.randomIndex=y.getRandomMjIndex(),console.log("开始发牌---",this.desktopItemCount);for(var e=function(e){p(t.node).delay(.04*e).call((function(){e==t.desktopItemCount-1?t.createDesktopMj(!0):t.createDesktopMj(!1)})).start()},i=0;i<this.desktopItemCount;i++)e(i)},n.countdown=function(){0===this.time?(this.unschedule(this.countdown),this.gameShowTips(k.gmae_fail)):(this.time--,this.time<10&&y.playSound(S.time_sound),this.timeLabel.string="第"+y.level+"关 倒计时:"+this.time+"s",this.timeProgressBar.progress=this.time/this.allTime)},n.createDesktopMj=function(t){this.desktopCuritem%3==0&&(this.randomIndex=y.getRandomMjIndex());var e=g(this.mycard_prefab);e.parent=this.node;var i=e.getComponent("mjcard");this.desktopItems.push(e);var s=this;i.initMj(this.randomIndex,this.desktopItems.length,y.animType,(function(){y.playSound(S.sendCard_sound),t&&(s.refreshDeaktopMj(),s.gameState=I.game_inGame,console.log("发牌完毕---",s.desktopCuritem),s.schedule(s.countdown,1))})),this.desktopCuritem+=1},n.refreshDeaktopMj=function(){for(var t=0;t<this.desktopItems.length;t++){for(var e=[],i=0;i<this.desktopItems.length;i++){var s=this.desktopItems[t].getPosition(),a=this.desktopItems[i].getPosition(),n=new _(s.x,s.y,90,120),o=new _(a.x,a.y,90,120);b.rectRect(n,o)&&e.push(this.desktopItems[i])}if(e.length<1)return;for(var l=Array.from(new Set(e)),h=l.reduce((function(t,e){return t.getSiblingIndex()>e.getSiblingIndex()?t:e})),m=0;m<l.length;m++){l[m].getComponent("mjcard").interaction=!1}h.getComponent("mjcard").interaction=!0}},n.deleteDesktopItems=function(t){for(var e=t.getComponent("mjcard"),i=0;i<this.desktopItems.length;i++){var s=this.desktopItems[i].getComponent("mjcard");if(e.cardId==s.cardId)return void this.desktopItems.splice(i,1)}},n.isTabCanDelete=function(t){for(var e=[],i=0;i<this.tabItem.length;i++)this.tabItem[i].name==t.name&&e.push(i);return 3!=e.length&&(e=[]),e},n.insertItem=function(t,e){this.tabItemPos=[];for(var i=0;i<this.tabNodes.length;i++){var s={x:0,y:0},a=this.tabNodes[i].getPosition();s.x=a.x,s.y=a.y,this.tabItemPos.push(s)}var n=t.getComponent("mjcard");n.restCard(),this.tabItem.push(t);var o=this.tabItem.length-1;n.setInsterEndPos(new c(this.tabItemPos[o].x,this.tabItemPos[o].y,0)),n.setCanClick(!1);var l=p(t).to(.2,{position:new c(this.tabItemPos[o].x,this.tabItemPos[o].y,0)}),h=p(t).call((function(){e()}));t.setSiblingIndex(1e3),p(t).sequence(l,h).start()},n.deleteTabAnima=function(t,e){var i=this.tabItem[t[2]],s=this.tabItem[t[1]],a=this.tabItem[t[0]];p(i).delay(.1).show().delay(.1).hide().union().repeat(2).removeSelf().start(),p(s).delay(.1).show().delay(.1).hide().union().repeat(2).removeSelf().start(),p(a).delay(.1).show().delay(.1).hide().union().repeat(2).removeSelf().call(e()).start()},n.restTopAnima=function(){var t=this;0==this.tabItem.length&&(t.isCanClick=!0);for(var e=0;e<this.tabItem.length;e++)e==this.tabItem.length-1?p(this.tabItem[e]).delay(.3).show().to(.3,{position:new c(this.tabItemPos[e].x,this.tabItemPos[e].y,0)}).call((function(){t.isCanClick=!0})).start():p(this.tabItem[e]).delay(.3).show().to(.3,{position:new c(this.tabItemPos[e].x,this.tabItemPos[e].y,0)}).start();0==this.desktopItems.length&&this.gameShowTips(k.game_success)},n.contiuneGame=function(){y.playSound(S.click_sound),this.gameTipsNode.active=!1,this.schedule(this.countdown,1),this.isCanClick=!0},n.gameShowTips=function(t){this.unschedule(this.countdown),t==k.game_hide?this.gameTipsNode.active=!1:t==k.game_seting?(this.gameTipsNode.active=!0,this.tips_title_label.string="菜  单",this.tips_music_node.active=!0,this.tips_sound_node.active=!0,this.tips_author_node.active=!0,this.gameContinueBtn.active=!0,this.gameRestBtn.active=!1,this.gameNextBtn.active=!1,this.tips_xipai_label.node.active=!1,this.tips_chehui_label.node.active=!1,this.tips_addtime_label.node.active=!1,this.tips_toushi_label.node.active=!1):t==k.gmae_fail?(y.playSound(S.gameLost_sound),this.isCanClick=!1,this.gameState=I.game_end,this.gameTipsNode.active=!0,this.tips_title_label.string="闯关失败，再接再厉!",this.gameContinueBtn.active=!1,this.gameRestBtn.active=!0,this.gameNextBtn.active=!1,this.tips_xipai_label.node.active=!0,this.tips_chehui_label.node.active=!0,this.tips_addtime_label.node.active=!0,this.tips_toushi_label.node.active=!0,this.tips_music_node.active=!1,this.tips_sound_node.active=!1,this.tips_author_node.active=!1,y.saveLevel(),y.savaData(),this.updataBtn(),this.tips_xipai_label.string="洗 牌: X "+y.xiPai,this.tips_chehui_label.string="撤 回: X "+y.cheHui,this.tips_addtime_label.string="加 时: "+y.addTime+"s",this.tips_toushi_label.string="透 视: X "+y.touShi):t==k.game_success&&(y.playSound(S.gameWin_sound),this.isCanClick=!1,this.gameState=I.game_end,this.gameTipsNode.active=!0,this.tips_title_label.string="恭喜，闯关成功!",this.gameContinueBtn.active=!1,this.gameRestBtn.active=!1,this.gameNextBtn.active=!0,y.level+=1,y.addTime+=10,y.saveLevel(),this.setBtnState("gameAddTimeBtn",!0,"加时"+y.addTime+"s"),y.savaData(),this.updataBtn(),y.xiPai++,y.cheHui++,y.touShi++,this.tips_xipai_label.string="洗 牌: X "+y.xiPai,this.tips_chehui_label.string="撤 回: X "+y.cheHui,this.tips_addtime_label.string="加 时: "+y.addTime+"s",this.tips_toushi_label.string="透 视: X "+y.touShi,this.tips_xipai_label.node.active=!0,this.tips_chehui_label.node.active=!0,this.tips_addtime_label.node.active=!0,this.tips_toushi_label.node.active=!0,this.tips_music_node.active=!1,this.tips_sound_node.active=!1,this.tips_author_node.active=!1)},n.updataBtn=function(){this.gameState==I.game_end?(this.setBtnState("gameXiPaiBtn",!1),this.setBtnState("gameCheHuiBtn",!1),this.setBtnState("gameAddTimeBtn",!1),this.setBtnState("gameToushiBtn",!1),this.setBtnState("gameCheHuiBtn",!1)):(y.xiPai<=0?this.setBtnState("gameXiPaiBtn",!1,"洗牌X0"):this.setBtnState("gameXiPaiBtn",!0,"洗牌X"+y.xiPai),y.cheHui<=0||this.tabItem.length<=0?this.setBtnState("gameCheHuiBtn",!1,"撤回X"+y.cheHui):this.setBtnState("gameCheHuiBtn",!0,"撤回X"+y.cheHui),y.addTime<=0?this.setBtnState("gameAddTimeBtn",!1,"加时0s"):this.setBtnState("gameAddTimeBtn",!0,"加时"+y.addTime+"s"),y.touShi<=0?this.setBtnState("gameToushiBtn",!1,"透视X0"):this.setBtnState("gameToushiBtn",!0,"透视X"+y.touShi)),y.savaData()},n.setBtnState=function(t,e,i){void 0===i&&(i=null);var s=this.node.parent.getChildByName(t),a=s.getChildByName("Label").getComponent(m);null!=i&&(a.string=i),e?(s.getComponent(f).color=C(255,255,255,255),s.getComponent(v).enabled=!0):(s.getComponent(f).color=C(255,255,255,128),s.getComponent(v).enabled=!1)},e}(B)).prototype,"mycard_prefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(A.prototype,"timeProgressBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(A.prototype,"timeLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(A.prototype,"gameTipsNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(A.prototype,"tabNodes",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=A))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/OpenContext.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tools.ts"],(function(t){var e,n,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.Component},null],execute:function(){var r;n._RF.push({},"2d8b196HyRKxaU4Qc5wie5w","OpenContext",void 0);var s=o.ccclass;o.property,t("OpenContext",s("OpenContext")(r=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.onEnable=function(){this.setUserLevel(),console.log("上报请求排行榜数据.....")},o.setUserLevel=function(){},o.onBtnClick=function(t,e){"close"==e&&(this.node.active=!1)},o.update=function(t){},o._reportUserLevel=function(t,e,n){},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/resMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,s,e;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,s=n.assetManager,e=n.Component}],execute:function(){t._RF.push({},"0b7cdPI/LJObbojwMRdBIRd","resMgr",void 0),n("default",function(n){function t(){for(var o,t=arguments.length,s=new Array(t),e=0;e<t;e++)s[e]=arguments[e];return(o=n.call.apply(n,[this].concat(s))||this).totalAb=0,o.nowAb=0,o.total=0,o.now=0,o.abBounds={},o.progressFunc=null,o.endFunc=null,o}o(t,n);var e=t.prototype;return e.onLoad=function(){null===t.Instance?(console.log("初始化resMgr单列!"),t.Instance=this):this.destroy()},e.loadRes=function(n,o,t){var s=this;n.load(o,t,(function(n,t){s.now++,n?console.log("load res = "+o+"--失败:"+n):console.log("load res  = "+o+"--成功"),s.progressFunc&&s.progressFunc(s.now,s.total),s.now>=s.total&&null!=s.endFunc&&s.endFunc()}))},e.loadAssetsInAssetsBundle=function(n){for(var o in n)for(var t=n[o].urls,s=n[o].assetType,e=0;e<t.length;e++)this.loadRes(this.abBounds[o],t[e],s)},e.loadAssetsBundle=function(n,o){var t=this;s.loadBundle(n,(function(s,e){null!=s?(console.log("Bundle--load 失败:"+n),t.abBounds[n]=null):(console.log("Bundle--load 成功:"+n),t.abBounds[n]=e),o&&o()}))},e.preLoadResPkg=function(n,o,t){var s=this;for(var e in this.totalAb=0,this.nowAb=0,this.total=0,this.now=0,this.progressFunc=o,this.endFunc=t,n)this.totalAb++,this.total+=n[e].urls.length;for(var e in n)this.loadAssetsBundle(e,(function(){s.nowAb++,s.nowAb===s.totalAb&&s.loadAssetsInAssetsBundle(n)}))},e.unLoadResPkg=function(){},e.preLoadRes=function(n,o,t,s){},e.getAsset=function(n,o){var t=s.getBundle(n);return null==t?(console.log("err:"+n+"ab包加载失败"),null):t.get(o)},t}(e)).Instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/tools.ts",["cc","./resMgr.ts","./audioManager.ts"],(function(e){var t,a,n,s,o;return{setters:[function(e){t=e.cclegacy,a=e.Prefab,n=e.AudioClip},function(e){s=e.default},function(e){o=e.default}],execute:function(){t._RF.push({},"8a205oDXPFARIhKMYUT4y5P","tools",void 0);var c=e("SOUND",function(e){return e[e.start_sound=0]="start_sound",e[e.click_sound=1]="click_sound",e[e.gameLost_sound=2]="gameLost_sound",e[e.gameWin_sound=3]="gameWin_sound",e[e.sendCard_sound=4]="sendCard_sound",e[e.time_sound=5]="time_sound",e[e.clear_sound=6]="clear_sound",e[e.back_sound=7]="back_sound",e}({})),i=(e("GAMESTATE",function(e){return e[e.game_start=0]="game_start",e[e.game_inGame=1]="game_inGame",e[e.game_end=2]="game_end",e}({})),e("GAMETIPS",function(e){return e[e.game_success=0]="game_success",e[e.gmae_fail=1]="gmae_fail",e[e.game_hide=2]="game_hide",e[e.game_seting=3]="game_seting",e}({})),e("default",function(){function e(){}return e.savaData=function(){localStorage.setItem("xiPai",e.xiPai.toString()),localStorage.setItem("cheHui",e.cheHui.toString()),localStorage.setItem("addTime",e.addTime.toString()),localStorage.setItem("touShi",e.touShi.toString())},e.getData=function(){var t=Number(localStorage.getItem("xiPai")),a=Number(localStorage.getItem("cheHui")),n=Number(localStorage.getItem("addTime")),s=Number(localStorage.getItem("touShi"));if(0===t&&0===a&&0==n&&0==s)return e.xiPai=3,e.cheHui=3,e.addTime=30,void(e.touShi=3);e.xiPai=t,e.cheHui=a,e.addTime=n,e.touShi=s},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.getRandomMjIndex=function(){return e.getRandomInt(1,34)},e.playSound=function(e){if(e==c.start_sound){var t=s.Instance.getAsset("sound","gameStart");o.Instance.playEffect(t)}else if(e==c.click_sound){var a=s.Instance.getAsset("sound","click");o.Instance.playEffect(a)}else if(e==c.gameLost_sound){var n=s.Instance.getAsset("sound","gameLost");o.Instance.playEffect(n)}else if(e==c.gameWin_sound){var i=s.Instance.getAsset("sound","gameWin");o.Instance.playEffect(i)}else if(e==c.sendCard_sound){var u=s.Instance.getAsset("sound","sendCard");o.Instance.playEffect(u)}else if(e==c.time_sound){var r=s.Instance.getAsset("sound","time");o.Instance.playEffect(r)}else if(e==c.clear_sound){var l=s.Instance.getAsset("sound","clear");o.Instance.playEffect(l)}else if(e==c.back_sound){var d=s.Instance.getAsset("sound","back");o.Instance.playBgm(d)}},e.saveLevel=function(){e.cardBackTotal=e.level,e.cardBackNow=0,localStorage.setItem("level",e.level.toString())},e.getLevel=function(){var t=localStorage.getItem("level");return e.level=Number(t),0==e.level&&(e.level=1),e.level},e.randomMjAnim=function(){var t=1;t=e.level%2==0?1:2,e.animType=t},e}()));i.level=1,i.picNum=3,i.animType=2,i.cardBackTotal=0,i.cardBackNow=0,i.music=!0,i.xiPai=3,i.cheHui=3,i.addTime=30,i.touShi=3,i.gameMusic=!0,i.gameSound=!0,i.resPkg={prefabs:{assetType:a,urls:["gameStart","mjcard","gameNode"]},sound:{assetType:n,urls:["back","click","gameLost","gameStart","gameWin","sendCard","time","clear"]}},t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});